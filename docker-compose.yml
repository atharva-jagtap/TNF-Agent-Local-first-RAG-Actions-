services:
  ollama:
    image: ollama/ollama:latest
    platform: linux/arm64
    ports: ["11434:11434"]
    volumes: ["ollama:/root/.ollama"]
    restart: unless-stopped

  qdrant:
    image: qdrant/qdrant:latest
    platform: linux/arm64
    ports: ["6333:6333"]
    volumes: ["qdrant:/qdrant/storage"]
    restart: unless-stopped

  api:
    build: ./api
    env_file: .env
    ports: ["8000:8000"]
    depends_on: [ollama, qdrant]
    restart: unless-stopped
    volumes:
      - ./data:/app/data:ro 

  ui:
    build: ./ui
    env_file: .env
    ports: ["8501:8501"]
    depends_on: [api]
    restart: unless-stopped

volumes:
  ollama: {}
  qdrant: {}
